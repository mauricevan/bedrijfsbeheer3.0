# ============================================
# BEDRIJFSBEHEER 3.0 - ENVIRONMENT CONFIGURATION
# ============================================
# Copy this file to .env and update with your actual values
# NEVER commit .env to version control!

# ============================================
# ENVIRONMENT & SERVER
# ============================================
# Environment: development, staging, or production
NODE_ENV=development

# Server port (default: 3001)
PORT=3001

# ============================================
# DATABASE
# ============================================
# PostgreSQL connection string (REQUIRED)
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA
#
# Development example (local PostgreSQL):
DATABASE_URL=postgresql://postgres:password@localhost:5432/bedrijfsbeheer?schema=public
#
# Production example (cloud hosted):
# DATABASE_URL=postgresql://user:pass@db.example.com:5432/bedrijfsbeheer_prod?schema=public&connection_limit=20&pool_timeout=10

# ============================================
# JWT AUTHENTICATION
# ============================================
# JWT Secret (REQUIRED in production, must be 32+ characters)
# Generate a secure secret with:
#   node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
#
# Development (weak secret, DO NOT use in production):
JWT_SECRET=dev-only-secret-change-me-in-production-use-crypto-randomBytes
#
# Production example (DO NOT use this exact value):
# JWT_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0e1f2

# JWT token expiration (default: 24h)
# Valid values: 1h, 24h, 7d, 30d
JWT_EXPIRY=24h

# ============================================
# CORS (Cross-Origin Resource Sharing)
# ============================================
# Allowed origin for frontend requests (REQUIRED in production)
#
# Development (local Vite dev server):
CORS_ORIGIN=http://localhost:5173
#
# Production example:
# CORS_ORIGIN=https://app.yourdomain.com

# ============================================
# RATE LIMITING
# ============================================
# Rate limit window in milliseconds (default: 900000 = 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window (default: 100)
RATE_LIMIT_MAX_REQUESTS=100

# Redis URL for distributed rate limiting (RECOMMENDED for production)
# If not set, uses in-memory storage (not suitable for multi-instance deployments)
#
# Development (optional):
# REDIS_URL=redis://localhost:6379
#
# Production example:
# REDIS_URL=redis://:password@redis.example.com:6379/0
# or for Redis Cloud/Upstash:
# REDIS_URL=rediss://:password@redis-12345.cloud.redislabs.com:12345

# ============================================
# EMAIL CONFIGURATION (Optional)
# ============================================
# SMTP settings for sending emails (invoice notifications, etc.)
# Leave empty if not using email features

# SMTP server hostname
SMTP_HOST=smtp.gmail.com

# SMTP server port (587 for TLS, 465 for SSL, 25 for unencrypted)
SMTP_PORT=587

# SMTP authentication
SMTP_USER=
SMTP_PASS=

# From address for outgoing emails
SMTP_FROM=noreply@yourdomain.com

# ============================================
# LOGGING (Optional)
# ============================================
# Log level: error, warn, info, debug (default: info)
LOG_LEVEL=info

# Log format: json, text (default: json in production, text in dev)
# LOG_FORMAT=json

# ============================================
# SECURITY (Optional)
# ============================================
# Enforce HTTPS (redirect HTTP to HTTPS)
# Always enabled in production, optional in development
# HTTPS_ONLY=true

# Enable/disable rate limiting (default: true)
# RATE_LIMIT_ENABLED=true

# Maximum request body size (default: 10mb)
# MAX_REQUEST_SIZE=10mb

# ============================================
# PRODUCTION DEPLOYMENT CHECKLIST
# ============================================
# Before deploying to production, ensure:
# [ ] NODE_ENV=production
# [ ] DATABASE_URL points to production PostgreSQL
# [ ] JWT_SECRET is a strong, randomly generated secret (64+ chars)
# [ ] CORS_ORIGIN is your production domain (https://app.yourdomain.com)
# [ ] HTTPS_ONLY=true (enforces HTTPS redirects)
# [ ] REDIS_URL is configured for multi-instance deployments
# [ ] SMTP credentials are set if using email features
# [ ] All secrets are stored in secure environment variable service
# [ ] .env file is in .gitignore and NEVER committed to git
# [ ] Change default demo passwords before going live
# [ ] Run database migrations (npm run db:deploy)
# [ ] Set up monitoring and logging (Sentry, CloudWatch, etc.)
# [ ] Configure backup strategy for PostgreSQL database

# Changelog - Versie 4.x

## Overzicht

Deze pagina bevat alle releases van versie 4.x, van nieuwste naar oudste.

---

## Versie 4.9.0 ğŸ†• **DATABASE DIAGNOSTICS & ANALYTICS DASHBOARD**

**Nieuwe Features:**

**1. Systeem Analytics & Optimalisatie Dashboard (Lean Six Sigma)**

- ğŸ†• **Analytics Tab in Admin Instellingen** - Volledig analytics dashboard voor data-driven optimalisatie
- ğŸ†• **Key Metrics Cards** - Totale events, actieve gebruikers, gebruikstijd, efficiency verandering
- ğŸ†• **Module Gebruik Statistieken:**
  - Bar charts voor sessies, acties en fouten per module
  - Uitgebreide tabellen met trends (increasing/decreasing/stable)
  - Totale sessies en tijd per module
- ğŸ†• **Proces EfficiÃ«ntie Metrics:**
  - Gemiddelde cyclus tijd per proces
  - Completion rate, error rate, rework rate
  - Bottleneck detectie met wachttijden
  - Bar charts voor cyclus tijd visualisatie
- ğŸ†• **Gebruiker Efficiency Scores:**
  - Efficiency scores (0-100) per gebruiker
  - Horizontal bar chart voor visuele vergelijking
  - Meest gebruikte modules per gebruiker
- ğŸ†• **Automatische Optimalisatie Aanbevelingen:**
  - Prioriteit levels (high/medium/low)
  - CategorieÃ«n (process/feature/usability/automation/quality)
  - ROI scores en impact inschatting
  - Aanbevolen acties per aanbeveling
  - Kleurgecodeerde priority badges
- ğŸ†• **Periode Filters** - Analyse per dag/week/maand/kwartaal/jaar
- ğŸ†• **Analytics Tracking:**
  - Automatische navigation tracking (via AnalyticsTracker component)
  - Action tracking voor invoice/quote creation, validations, payments
  - Work order tracking (creation, status updates, completions)
  - Task completion tracking met duration
  - LocalStorage voor data persistentie

**2. Database Diagnostics Dashboard**

- ğŸ†• **Database Diagnostics Tab in Admin Instellingen** - Baseline diagnostics voor managed databases
- ğŸ†• **20+ Voorgedefinieerde Issues:**
  - Connection issues (timeouts, pool exhaustion, latency)
  - Authentication issues (invalid keys, RLS blocking)
  - Performance issues (slow queries, cold starts, N+1 problems)
  - Schema issues (migration failures, missing indexes)
  - Configuration issues (SSL, timezone)
  - Platform limits (storage quota, rate limits)
  - SDK compatibility issues
  - Security issues (exposed keys, weak passwords)
- ğŸ†• **Severity Distributie:**
  - Statistics cards voor High/Medium/Low severity
  - Bar chart voor visuele verdeling
  - Total issues counter
- ğŸ†• **Categorie Filtering:**
  - Filter op categorie (Connection, Auth, Performance, etc.)
  - "Alle CategorieÃ«n" optie
  - Klikbare categorie cards voor snelle filtering
- ğŸ†• **Gedetailleerde Issue Cards:**
  - Severity badges (kleurgecodeerd)
  - Category badges
  - Latency indicators (indien beschikbaar)
  - Occurrences counters
  - Diagnostische stappen (lijst met checkpoints)
  - Voorgestelde oplossingen (actie-items)
  - Platform-specifieke informatie (Supabase/NeonDB/PlanetScale)
  - Test action buttons (klaar voor backend integratie)
- ğŸ†• **Vendor-Specific Informatie:**
  - Supabase-specifieke details (connection limits, pooling, etc.)
  - NeonDB-specifieke details (serverless cold starts, provisioned compute)
  - PlanetScale-specifieke details (branching, deploy requests)
- ğŸ†• **Responsive Design:**
  - Mobile-optimized layout
  - Scrollable tabs voor kleine schermen
  - Touch-friendly cards en buttons
  - Adaptive grid layouts

**Technische Updates:**

- ğŸ†• `AnalyticsEvent`, `ModuleUsageStats`, `UserActivityStats`, `ProcessMetrics`, `OptimizationRecommendation`, `AnalyticsDashboard` types
- ğŸ†• `utils/analytics.ts` - Analytics tracking en dashboard building functionaliteit
- ğŸ†• `components/AnalyticsTracker.tsx` - Automatische navigation en session tracking
- ğŸ†• `data/databaseDiagnostics.json` - Baseline diagnostics data (20 issues)
- ğŸ†• Recharts integratie voor analytics visualisaties
- ğŸ†• LocalStorage voor analytics data persistentie
- ğŸ†• Process flows definities voor metric berekeningen
- ğŸ†• Recommendation engine met regels voor automatische aanbevelingen

**Voordelen:**

- âœ… **Data-Driven Optimalisatie** - Beslissingen gebaseerd op echte gebruikspatronen
- âœ… **Proactieve Probleem Detectie** - Identificeer bottlenecks voordat ze kritiek worden
- âœ… **Database Health Monitoring** - Preventief database issues detecteren
- âœ… **Performance Insights** - Begrijp waar gebruikers tijd aan besteden
- âœ… **ROI Tracking** - Zie welke optimalisaties de meeste impact hebben
- âœ… **Lean Six Sigma Principes** - Wasted reduction en value stream mapping
- âœ… **Compliance Ready** - Audit trail voor alle systeem activiteiten

---

## Versie 4.8.0 ğŸ†• **AUTOMATISCHE FACTUUR CONVERSIE BIJ VOLTOOIDE WERKORDERS**

**Nieuwe Features:**

**1. Automatische Factuur Generatie**

- ğŸ†• **Automatische conversie** - Wanneer een werkorder wordt voltooid, wordt automatisch een factuur aangemaakt
- ğŸ†• **Slimme logica:**
  - Als er al een factuur bestaat â†’ wordt bijgewerkt met werkelijke gewerkte uren
  - Als er een offerte is met factuur â†’ wordt die factuur bijgewerkt met werkelijke uren
  - Anders â†’ nieuwe factuur aangemaakt met werkorder items en uren
- ğŸ†• **Items conversie:**
  - Benodigde materialen uit werkorder â†’ factuur items
  - Gewerkte uren (`hoursSpent`) â†’ factuur werkuren
  - Gebruikt offertedata als basis indien beschikbaar
- ğŸ†• **Automatische berekeningen:**
  - Subtotaal (items + werkuren)
  - BTW (21% standaard, of van offerte indien gekoppeld)
  - Totaal bedrag
- ğŸ†• **Factuur details:**
  - Factuurnummer automatisch gegenereerd
  - Factuurdatum = vandaag
  - Vervaldatum = +14 dagen
  - Link naar werkorder en offerte (indien aanwezig)
  - Status: Draft (klaar om te verzenden)
- ğŸ†• **Koppeling bewaren:**
  - Werkorder krijgt `invoiceId` link naar factuur
  - Factuur krijgt `workOrderId` link naar werkorder
  - Bidirectionele relatie voor tracking

**2. Smart Update Logic**

- ğŸ†• **Bestaande facturen bijwerken** - Voorkomt dubbele facturen
- ğŸ†• **Werkelijke uren gebruiken** - Facturen bevatten daadwerkelijk gewerkte uren, niet geschat
- ğŸ†• **Offerte integratie** - Gebruikt items en prijzen uit offerte indien beschikbaar
- ğŸ†• **Voorraad items** - Converteert benodigde materialen naar factuur items met prijzen

**3. UX Verbeteringen**

- ğŸ†• **Bevestigingsmelding** - Duidelijke melding wanneer factuur is aangemaakt
- ğŸ†• **Direct zichtbaar** - Factuur verschijnt direct in Boekhouding module
- ğŸ†• **Volledig traceerbaar** - Alle links en geschiedenis behouden
- ğŸ†• **Geen handmatige actie nodig** - Volledig automatisch proces

**Technische Updates:**

- ğŸ†• `setInvoices` prop toegevoegd aan WorkOrders component
- ğŸ†• `convertCompletedWorkOrderToInvoice()` functie geÃ¯mplementeerd
- ğŸ†• Helper functies voor factuurnummer generatie
- ğŸ†• Factuur history tracking
- ğŸ†• Automatische trigger in `updateStatus()` bij status 'Completed'

**Workflow:**

```
Werkorder Voltooid
  â†“
Voorraad Afgetrokken
  â†“
Automatisch Factuur Aangemaakt/Bijgewerkt
  â†“
Factuur Klaar in Boekhouding Module
  â†“
Verzenden en Betaling Registreren
```

**Voordelen:**

- âœ… **Tijd besparen** - Geen handmatige factuur aanmaak meer nodig
- âœ… **Minder fouten** - Automatische berekeningen en koppelingen
- âœ… **Volledige traceerbaarheid** - Alle links behouden
- âœ… **Werkelijke uren** - Facturen bevatten echte gewerkte tijd
- âœ… **Seamless workflow** - Van werkorder naar factuur in Ã©Ã©n stap

---

## Versie 4.7.0 ğŸ†• **CRM FACTUREN & HRM PERSOONLIJK DOSSIER**

**Nieuwe Features:**

**1. CRM - Facturen in Klantoverzicht**

- ğŸ†• **FinanciÃ«n modal** - Klik op klant â†’ FinanciÃ«n â†’ Zie alle facturen en offertes
- ğŸ†• **Filter op betaalde en openstaande facturen** - Alleen relevante facturen getoond
- ğŸ†• **Factuur acties in tabel:**
  - âœï¸ Bewerken - Open factuur in edit modal met volledige items/labor beheer
  - ğŸ“‹ Clonen - Maak kopie met nieuw nummer en datum
  - ğŸ“¤ Naar Werkorder - Converteer naar werkorder met user selectie
- ğŸ†• **Clone modal** - Volledig bewerkbare formulieren (klant, items, labor, datums)
- ğŸ†• **Edit modal** - Bewerk bestaande facturen met items/labor wijzigingen
- ğŸ†• **User selectie modal** - Kies medewerker voor werkorder toewijzing

**2. HRM - Gebruikersbeheer Uitbreidingen**

- ğŸ†• **Wachtwoord veld** - Stel wachtwoord in bij nieuwe medewerker
- ğŸ†• **Admin checkbox** - Vink aan voor admin rechten bij nieuwe medewerker
- ğŸ†• **Bewerk functionaliteit** - Volledig medewerker bewerken (naam, functie, email, telefoon, wachtwoord, admin)
- ğŸ†• **Persoonlijk dossier** - Klik "ğŸ“‹ Dossier" knop om dossier te openen
- ğŸ†• **Notities systeem** met 8 types:
  - â° Te laat (geel)
  - âŒ Afwezig (rood)
  - ğŸ¯ Milestone (blauw)
  - ğŸ“Š Prestatie (paars)
  - âš ï¸ Waarschuwing (oranje)
  - â­ Compliment (groen)
  - âœ… Aanwezigheid (teal)
  - ğŸ“ Algemeen (grijs)
- ğŸ†• **Notities toevoegen** - Admin kan notities toevoegen met type, datum, titel en beschrijving
- ğŸ†• **Notities verwijderen** - Admin kan notities verwijderen
- ğŸ†• **Timeline weergave** - Notities gesorteerd op datum (nieuwste eerst)
- ğŸ†• **Admin badge** - ğŸ‘‘ badge bij medewerkers met admin rechten

**Technische Updates:**

- ğŸ†• `EmployeeNote` en `EmployeeNoteType` types toegevoegd
- ğŸ†• `Employee.notes` array voor persoonlijk dossier
- ğŸ†• `Employee.isAdmin` veld toegevoegd
- ğŸ†• Props uitgebreid in CRM voor werkorders, inventory, setInvoices
- ğŸ†• Helper functies voor factuur beheer in CRM
- ğŸ†• Clone/edit modals met volledige items/labor beheer

**UX Verbeteringen:**

- âœ… Direct toegang tot facturen vanuit klantoverzicht
- âœ… Filter op relevante facturen (betaald/openstaand)
- âœ… Snelle acties (bewerken, clonen, werkorder) bij elke factuur
- âœ… Volledig dossier systeem voor HR tracking
- âœ… Visuele badges voor admin rechten
- âœ… Kleurgecodeerde notities voor snelle herkenning

---

## Versie 4.6.0 ğŸ†• **CLONE FUNCTIONALITEIT VOOR OFFERTES & FACTUREN**

**Nieuwe Features:**

**1. Offerte Clonen**

- ğŸ†• **"Clonen" knop** bij elke offerte
- ğŸ†• **Automatisch nieuw ID** - Krijgt uniek Q-nummer (Q1234 wordt Q5678)
- ğŸ†• **Automatische datum** - Aanmaakdatum wordt op vandaag gezet
- ğŸ†• **Aanpasbaar tijdens clonen:**
  - Wijzig klant
  - Pas items aan (toevoegen/verwijderen)
  - Wijzig hoeveelheden en prijzen
  - Update notities
  - Wijzig geldigheidsdatum
- ğŸ†• **Status reset** - Geclonede offerte krijgt status "draft"
- ğŸ†• **Geen werkorder koppeling** - Werkorder link wordt niet meegekopieerd

**2. Factuur Clonen**

- ğŸ†• **"Clonen" knop** bij elke factuur
- ğŸ†• **Automatisch nieuw factuurnummer** - Krijgt volgend beschikbaar nummer (2025-001, 2025-002, etc.)
- ğŸ†• **Datum aanpassing** - Factuurdatum wordt vandaag, vervaldatum +14 dagen
- ğŸ†• **Aanpasbaar tijdens clonen:**
  - Wijzig klant
  - Pas items aan (toevoegen/verwijderen)
  - Wijzig hoeveelheden en prijzen
  - Update betalingsvoorwaarden
  - Wijzig datums
  - Update notities
- ğŸ†• **Status reset** - Geclonede factuur krijgt status "draft"
- ğŸ†• **Geen koppelingen** - Offerte en werkorder links worden niet meegekopieerd
- ğŸ†• **Betalingsdatum wissen** - Geclonede factuur heeft geen betaaldatum

**UI Implementatie:**

- ğŸ†• **Clone knop in card** - Groene ğŸ“‹ knop bij elke offerte/factuur
- ğŸ†• **Clone formulier** - Identiek aan aanmaak formulier maar vooraf ingevuld
- ğŸ†• **Visuele feedback** - Succesbericht na clonen met nieuw nummer
- ğŸ†• **Scroll naar nieuw item** - Automatisch scrollen naar geclonede offerte/factuur

**Gebruik Cases:**

- âœ… **Terugkerende klanten** - Clone vorige offerte voor nieuwe opdracht
- âœ… **Standaard offertes** - Maak template offerte en clone voor elke klant
- âœ… **Factuur correcties** - Clone en pas aan in plaats van origineel wijzigen
- âœ… **Seizoenswerk** - Clone offerte van vorig jaar en update prijzen
- âœ… **Snelle duplicatie** - Bespaar tijd bij vergelijkbare opdrachten

**Backend Wijzigingen:**

- ğŸ†• `cloneQuote()` functie in AccountingNew.tsx
- ğŸ†• `cloneInvoice()` functie in AccountingNew.tsx
- ğŸ†• Automatische ID generatie logica
- ğŸ†• Datum reset functionaliteit
- ğŸ†• Link stripping (werkorder/offerte koppelingen)

**UX Verbeteringen:**

- ğŸ†• **Eenvoudige workflow** - Ã‰Ã©n klik op Clone, bewerk indien nodig, opslaan
- ğŸ†• **Geen fouten** - Automatische validatie zoals bij nieuwe offerte/factuur
- ğŸ†• **Volledig aanpasbaar** - Alle velden zijn bewerkbaar
- ğŸ†• **Consistente nummering** - Volgt bestaande nummer schema's

---

## Versie 4.5.0 ğŸ“± **VOLLEDIGE MOBILE OPTIMALISATIE**

**Mobile-First Features:**

**1. Hamburger Menu & Sidebar**

- ğŸ†• **Responsive hamburger menu** op schermen < 1024px
- ğŸ†• **Slide-in sidebar animatie** vanaf links met overlay
- ğŸ†• **Auto-close functionaliteit** - sidebar sluit bij navigatie en bij click buiten
- ğŸ†• **Touch-optimized** met grote knoppen en smooth transitions
- ğŸ†• **Z-index layering** - overlay (z-40), sidebar (z-50)

**2. Responsive Header**

- ğŸ†• **Compact design** op mobile met flexibele layout
- ğŸ†• **Hamburger icoon** links voor sidebar toggle
- ğŸ†• **Responsive notificatie dropdown** - full-width op mobile
- ğŸ†• **Adaptive user menu** - verberg details op kleine schermen
- ğŸ†• **Touch-friendly buttons** met 44x44px minimum size

**3. Login Scherm Verbeteringen**

- ğŸ†• **Responsive layout** met aangepaste padding en font sizes
- ğŸ†• **Touch-optimized inputs** met 16px font (voorkomt iOS zoom)
- ğŸ†• **Active states** voor directe tap feedback
- ğŸ†• **Compacte demo knoppen** op kleine schermen

**4. Mobile-First CSS**

- ğŸ†• **index.css met mobile optimalisaties:**
  - Tap highlight color disabled
  - Smooth scrolling op iOS
  - Touch-friendly form inputs
  - Responsive table scrolling
  - Performance optimized shadows
  - Custom scrollbars
  - Safe area support voor notched devices
  - Reduced motion support
  - Print styles

**5. Responsive Breakpoints**

- ğŸ†• **sm**: 640px (smartphones landscape)
- ğŸ†• **md**: 768px (tablets portrait)
- ğŸ†• **lg**: 1024px (tablets landscape/laptops)
- ğŸ†• **xl**: 1280px (desktops)

**UX Verbeteringen:**

- âœ… **Ã‰Ã©n hand bediening** mogelijk op smartphones
- âœ… **Touch gestures** voor natuurlijke navigatie
- âœ… **No zoom inputs** - voorkomt iOS zoom bij focus
- âœ… **Smooth animaties** met hardware acceleration
- âœ… **Adaptive layouts** voor portrait/landscape
- âœ… **Accessible** met focus states en reduced motion

**Developer Experience:**

- âœ… **Tailwind responsive utilities** overal consistent
- âœ… **Mobile-first approach** - start met mobile, schaal op
- âœ… **Component-level responsive props** voor betere controle
- âœ… **CSS custom properties** voor theming
- âœ… **Performance optimized** met lighter shadows op mobile

**Testing & Compatibility:**

- âœ… Getest op iPhone (portrait + landscape)
- âœ… Getest op Android (verschillende schermgroottes)
- âœ… Getest op iPad (portrait + landscape)
- âœ… Touch gestures werkend
- âœ… Formulieren zonder zoom
- âœ… Tabellen met horizontale scroll

**Technische Details:**

- State management voor sidebar toggle in App.tsx
- Props `isMobileOpen` en `onMobileClose` voor Sidebar
- Prop `onMobileMenuToggle` voor Header
- CSS transforms voor smooth slide-in animaties
- Fixed positioning met proper z-index stacking
- Tailwind utility classes voor alle responsive breakpoints

---

## Versie 4.4.0 ğŸ†• **AUTOMATISCHE SWAP/REORDER FUNCTIONALITEIT**

**Nieuwe Features:**

**1. Intelligente Werkorder Herschikking**

- ğŸ†• **Automatische swap bij indexering** - Wanneer je indexnummer wijzigt, worden andere werkorders automatisch opgeschoven
- ğŸ†• **Conflictresolutie** - Als je indexnummer 2 naar 1 wijzigt, wordt de oude #1 automatisch #2
- ğŸ†• **Kettingreactie** - Bij meerdere conflicten worden alle getroffen werkorders netjes opgeschoven
- ğŸ†• **Per medewerker** - Swap werkt alleen binnen dezelfde medewerker (Jan's #1 blijft Jan's #1)
- ğŸ†• **Intelligente nummering** - Systeem zoekt automatisch eerste vrije nummer bij conflict
- ğŸ†• **Behoud uniekheid** - Geen dubbele indexnummers meer binnen Ã©Ã©n medewerker

**2. Verbeterde Gebruikerservaring**

- ğŸ†• **Realtime updates** - Zie direct de nieuwe volgorde na wijziging
- ğŸ†• **Geen handmatig herschikken** - Systeem regelt alles automatisch
- ğŸ†• **Voorkom fouten** - Onmogelijk om dubbele nummers te hebben
- ğŸ†• **Soepele workflow** - Verander prioriteiten zonder zorgen over conflicten

---

## Versie 4.3.0 **WERKORDER INDEXERING SYSTEEM**

**Nieuwe Features:**

**1. Werkorder Indexering & Sortering**

- ğŸ†• **Indexnummer veld** - Elk werkorder kan een indexnummer krijgen
- ğŸ†• **Handmatige nummering** - Kies zelf welk nummer je aan een werkorder wilt geven (1-999)
- ğŸ†• **Automatische nummering** - Laat veld leeg voor automatisch volgnummer
- ğŸ†• **Aanpasbaar na aanmaken** - Verander indexnummer later in edit modal
- ğŸ†• **Visuele badge** - Zie indexnummer als "#3" linksboven in werkorder card
- ğŸ†• **Automatische sortering** - Werkorders gesorteerd op indexnummer (laagste eerst)
- ğŸ†• **Prioritering systeem** - Geef belangrijke taken lage nummers (1, 2, 3) voor bovenaan

**2. UI Verbeteringen**

- ğŸ†• **Index badge** - Compacte #-nummer weergave linksboven elke card
- ğŸ†• **Optioneel veld** - Indexnummer niet verplicht, systeem wijst automatisch toe
- ğŸ†• **Smart defaults** - Nieuw nummer is altijd hoogste + 1
- ğŸ†• **Validatie** - Alleen positieve getallen toegestaan
- ğŸ†• **Tooltip hints** - Helptekst bij indexnummer veld

**Gebruik Cases:**

- âœ… **Prioriteit bepalen** - Taak #1 = hoogste prioriteit, komt bovenaan
- âœ… **Volgorde plannen** - Bepaal in welke volgorde taken uitgevoerd worden
- âœ… **Herschikken** - Pas nummers aan om volgorde te wijzigen
- âœ… **Overzicht behouden** - Consistente nummering per medewerker
- âœ… **Flexibiliteit** - Mix van handmatig en automatisch nummeren

**Technische Details:**

- ğŸ†• `sortIndex` veld toegevoegd aan WorkOrder type
- ğŸ†• Automatische berekening van volgend nummer
- ğŸ†• Sortering in useMemo hooks voor performance
- ğŸ†• Input validatie met number type

---

## Versie 4.2.0 ğŸ†• **WERKORDERS GEGROEPEERD PER MEDEWERKER**

**Nieuwe Features:**

**1. Werkorders Groepering per Medewerker (Admin)**

- ğŸ†• **Gegroepeerd overzicht** - Bij "Alle medewerkers" krijgt elke medewerker een eigen sectie
- ğŸ†• **Employee Section Header** - Duidelijke header met naam, rol en avatar per medewerker
- ğŸ†• **Statistieken per medewerker** - Zie direct aantal taken per status per persoon
- ğŸ†• **4 Kanban kolommen per medewerker** - To Do, In Wacht, In Uitvoering, Afgerond
- ğŸ†• **Visuele scheiding** - Duidelijk onderscheid tussen verschillende medewerkers

**UX Verbeteringen:**

- ğŸ†• **Voor Admins:** Direct overzicht van werklastverdeling
- ğŸ†• **Werklastverdeling** - Eenvoudig zien wie veel/weinig werk heeft
- ğŸ†• **Planning optimalisatie** - Snel identificeren wie beschikbaar is
- ğŸ†• **Monitoring per persoon** - Gedetailleerd volgen van voortgang per medewerker

**Voordelen:**

- âœ… **Overzichtelijk** - Geen lange lijst meer, maar gestructureerd per persoon
- âœ… **EfficiÃ«nt** - Sneller beslissingen nemen over taakverdeling
- âœ… **Transparant** - Iedereen ziet wie wat doet
- âœ… **Schaalbaar** - Werkt met onbeperkt aantal medewerkers

---

## Versie 4.1.0 ğŸ†• **HISTORY VIEWER & AUDIT TRAIL**

**Nieuwe Features:**

**1. History Viewer Component**

- ğŸ†• **HistoryViewer component** voor volledige transparantie
- ğŸ†• **Timestamp summary sectie** met belangrijkste tijdstippen
- ğŸ†• **Relatieve tijd weergave** ("2 dagen geleden", "5 uur geleden")
- ğŸ†• **Hover functie** - toon exacte timestamp bij hover
- ğŸ†• **Uitklapbare geschiedenis** met alle wijzigingen
- ğŸ†• **Iconen per actie** (ğŸ†• created, ğŸ‘¤ assigned, ğŸ“Š status_changed, etc.)

**2. Timestamp Tracking**

- ğŸ†• **Created timestamp** - wanneer werkorder is aangemaakt
- ğŸ†• **Converted timestamp** - wanneer vanuit offerte/factuur geconverteerd
- ğŸ†• **Assigned timestamp** - wanneer toegewezen (en hertoewijzingen)
- ğŸ†• **Started timestamp** - wanneer status naar "In Progress" ging
- ğŸ†• **Completed timestamp** - wanneer werkorder is afgerond

**3. History Entries (Audit Trail)**

- ğŸ†• **Created entry** - wie heeft werkorder aangemaakt
- ğŸ†• **Converted entry** - conversie van offerte/factuur met details
- ğŸ†• **Assigned entry** - toewijzing met van/naar informatie
- ğŸ†• **Status changed entry** - alle status wijzigingen met oude/nieuwe status
- ğŸ†• **Reassignment tracking** - hertoewijzingen volledig gelogd

**4. UI Implementaties**

- ğŸ†• **History Viewer in WorkOrderCard** - onderaan elke card
- ğŸ†• **History Viewer in Edit Modal** - volledige geschiedenis bij bewerken
- ğŸ†• **Compacte timestamp grid** - 2-kolommen layout
- ğŸ†• **Uitklap animatie** - smooth transition met pijl icoon
- ğŸ†• **Scroll functionaliteit** - max height 260px voor lange histories

**5. Smart Time Formatting**

- ğŸ†• **Zojuist** - <1 minuut geleden
- ğŸ†• **X min geleden** - recente wijzigingen (<60 min)
- ğŸ†• **X uur geleden** - vandaag (<24 uur)
- ğŸ†• **Gisteren** - 1 dag geleden
- ğŸ†• **X dagen geleden** - deze week (<7 dagen)
- ğŸ†• **Volledige datum** - oudere wijzigingen (22 okt 2024, 14:30)

**Backend Wijzigingen:**

- ğŸ†• `timestamps` object in WorkOrder type
- ğŸ†• `history` array in WorkOrder type
- ğŸ†• `WorkOrderHistoryEntry` interface
- ğŸ†• `assignedBy` en `convertedBy` velden
- ğŸ†• Automatische history entry creatie bij alle acties
- ğŸ†• Timestamp updates bij status wijzigingen

**UX Verbeteringen:**

- ğŸ†• **Voor Medewerkers:** Zie direct wanneer taken zijn toegewezen en gestart
- ğŸ†• **Voor Admins:** Volledige audit trail van alle wijzigingen
- ğŸ†• **Voor het Bedrijf:** Compliance en traceerbaarheid gegarandeerd
- ğŸ†• **Visuele feedback:** Duidelijke iconen en kleuren per actie type

**Voordelen:**

- âœ… **Transparantie** - Iedereen ziet de volledige tijdlijn
- âœ… **Verantwoordelijkheid** - Wie heeft wat wanneer gedaan is altijd duidelijk
- âœ… **Analyse** - Identificeer bottlenecks in werkorder doorlooptijd
- âœ… **Communicatie** - Duidelijke geschiedenis voor klantcommunicatie
- âœ… **Compliance** - Voldoe aan audit vereisten met volledige logging

---

## Versie 4.0.0 ğŸ†• **WERKORDER INTEGRATIE**

**Nieuwe Features:**

**1. Offerte/Factuur â†’ Werkorder Conversie**

- ğŸ†• **"ğŸ“‹ Maak Werkorder" knop** bij geaccepteerde offertes
- ğŸ†• **"ğŸ“‹ Maak Werkorder" knop** bij verzonden facturen
- ğŸ†• **Automatische werkorder generatie:**
  - Titel: "[Klant] - [Offerte/Factuur titel]"
  - Klant automatisch gekoppeld
  - Items â†’ Benodigde materialen
  - Werkuren â†’ Geschatte tijd
  - Status: To Do
  - Referentie naar bron behouden

**2. Real-time Status Tracking**

- ğŸ†• **Live status badges** in offertes en facturen:
  - ğŸ”µ "Werkorder: To Do"
  - ğŸŸ¡ "Werkorder: In Wacht"
  - ğŸŸ¢ "Werkorder: In Uitvoering"
  - âœ… "Werkorder: Voltooid"
- ğŸ†• **Klikbare badges** â†’ Spring naar werkorder
- ğŸ†• **Automatische updates** bij status wijzigingen
- ğŸ†• **Visuele indicatoren:**
  - Groene border bij voltooide werkorders
  - Status icon in header

**3. Bidirectionele Synchronisatie**

- ğŸ†• **"âœï¸ Bewerk & Update Werkorder" knop**
- ğŸ†• **Live sync functies:**
  - Items toevoegen/verwijderen â†’ Materialen bijgewerkt
  - Werkuren aanpassen â†’ Geschatte tijd aangepast
  - Notities wijzigen â†’ Werkorder notities gesynchroniseerd
- ğŸ†• **Smart validation:**
  - Voorraad controle bij materiaal toevoeging
  - Waarschuwing bij actieve werkorder
  - Blokkade bij voltooide werkorder

**4. Voltooiings Workflow**

- ğŸ†• **Voltooiings badge** met groene checkmark
- ğŸ†• **Uren vergelijking:**
  - Geschatte uren vs Gewerkte uren
  - Percentage verschil
  - Kleurcodering (groen/oranje/rood)
- ğŸ†• **Materiaalverbruik tracking:**
  - Gepland vs Gebruikt
  - Afwijkingen weergave
  - Voorraad automatisch bijgewerkt

**5. Nieuwe UI Componenten**

- ğŸ†• Status badge component met kleuren
- ğŸ†• Werkorder info sectie in offertes/facturen
- ğŸ†• Synchronisatie knoppen en iconen
- ğŸ†• Progress indicators
- ğŸ†• Tijdlijn weergave (offerte â†’ werkorder â†’ voltooiing)

**Backend Wijzigingen:**

- ğŸ†• Nieuwe relatie: `Quote.workOrderId` en `Invoice.workOrderId`
- ğŸ†• Nieuwe relatie: `WorkOrder.quoteId` en `WorkOrder.invoiceId`
- ğŸ†• Sync functionaliteit in state management
- ğŸ†• Bidirectionele updates tussen modules
- ğŸ†• Voorraad validatie bij conversie

**UX Verbeteringen:**

- ğŸ†• Ã‰Ã©n-klik conversie workflow
- ğŸ†• Real-time visuele feedback
- ğŸ†• IntuÃ¯tieve status badges
- ğŸ†• Direct navigatie tussen gekoppelde items
- ğŸ†• Duidelijke waarschuwingen en blokkades

**Technische Updates:**

- ğŸ†• TypeScript types uitgebreid met koppelingen
- ğŸ†• Nieuwe helper functies voor synchronisatie
- ğŸ†• Event listeners voor status updates
- ğŸ†• Validation logic voor conflicten

---

[â† Terug naar Changelog Overzicht](./README.md)

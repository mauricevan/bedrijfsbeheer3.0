# Changelog - Versie 5.x

## Overzicht

Deze pagina bevat alle releases van versie 5.x, van nieuwste naar oudste.

---

## Versie 5.8.0 ğŸ†• **EMAIL INTEGRATIE & AUTOMATISCHE OFFERTE CREATIE**

**Nieuwe Features:**

**1. Email Drop Zone op Dashboard**

- ğŸ†• **Drag-and-drop zone** - Sleep .eml bestanden of Outlook emails direct naar dashboard
- ğŸ†• **Outlook integratie** - Directe drag-and-drop vanuit Outlook (via Electron app)
- ğŸ†• **Automatische email parsing** - Emails worden automatisch geparsed en geanalyseerd
- ğŸ†• **Workflow detectie** - Systeem detecteert automatisch of email een order, taak of notificatie is
- ğŸ†• **Email preview modal** - Bekijk email details voordat je actie onderneemt
- ğŸ†• **Klant/lead matching** - Automatische matching op basis van email adres
- ğŸ†• **Meerdere bestanden** - Sleep meerdere .eml bestanden tegelijk
- ğŸ†• **Visuele feedback** - Duidelijke status indicatoren tijdens verwerking
- ğŸ†• **Verwerkte emails lijst** - Overzicht van alle verwerkte emails met status

**2. Email Integratie in Accounting Module**

- ğŸ†• **QuoteEmailIntegration component** - Automatische offerte creatie vanuit emails
- ğŸ†• **Email naar offerte parser** - Detecteert items, prijzen en werkuren in email tekst
- ğŸ†• **Klant selectie** - Kies of maak klant aan vanuit email adres
- ğŸ†• **Preview en bevestiging** - Bekijk geparsede data voordat offerte wordt aangemaakt
- ğŸ†• **Automatische notities** - Email details worden automatisch toegevoegd aan offerte notities

**3. Email Integratie in CRM Module**

- ğŸ†• **Email tab** - Volledige email workflow in CRM module
- ğŸ†• **EmailDropZone component** - Zelfde drag-and-drop functionaliteit als dashboard
- ğŸ†• **Universele email preview** - Preview modal voor alle email types
- ğŸ†• **Interactie creatie** - Automatisch interactie record aanmaken vanuit email
- ğŸ†• **Klant/lead creatie** - Maak nieuwe klanten of leads aan vanuit email
- ğŸ†• **Taak creatie** - Converteer emails naar taken met deadline tracking

**4. Email Utilities & Parsing**

- ğŸ†• **EML parser** - Volledige .eml bestand parser met ondersteuning voor:
  - Van/Naar adressen
  - Onderwerp en body tekst
  - Datum parsing
  - HTML naar tekst conversie
- ğŸ†• **Email quote parser** - Intelligente parser voor offerte data uit emails:
  - Detecteert items en prijzen
  - Herkent werkuren en tarieven
  - BTW berekeningen
- ğŸ†• **Email-customer mapping** - Sla email adres naar klant mapping op voor toekomstige matching
- ğŸ†• **Electron integratie** - Ondersteuning voor Electron app met Outlook drag-and-drop

**Voordelen:**

- âœ… **Tijd besparen** - Geen handmatig overtypen van email informatie meer nodig
- âœ… **Minder fouten** - Automatische parsing voorkomt typefouten
- âœ… **Snelle workflow** - Van email naar offerte/taak in enkele klikken
- âœ… **Volledige traceerbaarheid** - Email details worden opgeslagen in notities
- âœ… **Flexibele integratie** - Werkt met .eml bestanden en directe Outlook integratie

**Technische Updates:**

- ğŸ†• `EmailDropZone` component toegevoegd
- ğŸ†• `EmailPreviewModal` component voor universele email preview
- ğŸ†• `QuoteEmailIntegration` component voor offerte creatie vanuit emails
- ğŸ†• `emlParser.ts` utility voor .eml bestand parsing
- ğŸ†• `emailQuoteParser.ts` utility voor offerte data extractie
- ğŸ†• `emailCustomerMapping.ts` utility voor email-klant mapping
- ğŸ†• Electron API integratie voor Outlook drag-and-drop
- ğŸ†• EmailDropZone geÃ¯ntegreerd in Dashboard en CRM module
- ğŸ†• QuoteEmailIntegration geÃ¯ntegreerd in Accounting module

---

## Versie 5.7.1 ğŸ†• **CATEGORIE FILTER IN POS & ACCOUNTING + UX VERBETERINGEN**

**Nieuwe Features:**

**1. Categorie Filter in POS (Kassa)**

- ğŸ†• **Categorie filter dropdown** - Filter items op categorie in kassasysteem
- ğŸ†• **Zoekbare dropdown** - Type om snel categorieÃ«n te vinden
- ğŸ†• **Visuele feedback** - Kleur badges en item count per categorie
- ğŸ†• **"Wis filter" knop** - Snel filter resetten
- ğŸ†• **Altijd zichtbaar** - Dropdown is altijd zichtbaar (ook zonder categories, met melding)
- ğŸ†• **Combinatie filtering** - Werkt samen met zoekbalk voor naam/SKU

**2. Categorie Filter in Accounting (Facturen & Offertes)**

- ğŸ†• **Categorie filter dropdown** - Filter items op categorie bij het maken van offertes en facturen
- ğŸ†• **Boven items sectie** - Filter staat duidelijk boven de items lijst
- ğŸ†• **Zoekbare dropdown** - Type om snel categorieÃ«n te vinden
- ğŸ†• **Visuele feedback** - Kleur badges en item count per categorie
- ğŸ†• **"Wis filter" knop** - Snel filter resetten
- ğŸ†• **Altijd zichtbaar** - Dropdown is altijd zichtbaar (ook zonder categories, met melding)
- ğŸ†• **Aparte zoekbalk** - Zoekbalk voor naam/SKU staat apart van categorie filter

**3. UX Verbeteringen**

- ğŸ†• **Verwijderd dubbel zoekveld** - Het aparte zoekveld binnen item rows is verwijderd
- ğŸ†• **Duidelijke scheiding** - Categorie filter en zoekbalk zijn nu duidelijk gescheiden
- ğŸ†• **Consistente ervaring** - Zelfde filter functionaliteit in Inventory, POS en Accounting
- âœ… **Betere workflow** - Eerst filteren op categorie, dan zoeken op naam/SKU

**Voordelen:**

- âœ… **Consistente filtering** - Zelfde categorie filter functionaliteit in alle modules
- âœ… **Sneller werken** - Filter eerst op categorie, dan zoeken
- âœ… **Minder verwarring** - Geen dubbele zoekvelden meer
- âœ… **Altijd beschikbaar** - Filter is altijd zichtbaar, zelfs zonder categories
- âœ… **Duidelijke instructies** - Melding wanneer geen categories beschikbaar zijn

**Technische Updates:**

- ğŸ†• `categoryFilter`, `categorySearchTerm`, `showCategoryDropdown` state toegevoegd aan POS component
- ğŸ†• `inventoryCategoryFilter`, `inventoryCategorySearchTerm`, `showInventoryCategoryDropdown` state toegevoegd aan Accounting component
- ğŸ†• `filteredCategories` useMemo voor zoekbare dropdown in POS
- ğŸ†• `filteredInventoryCategories` useMemo voor zoekbare dropdown in Accounting
- ğŸ†• Categorie filter dropdown UI toegevoegd aan POS (boven zoekbalk)
- ğŸ†• Categorie filter dropdown UI toegevoegd aan Accounting (boven items sectie)
- ğŸ†• Apart zoekveld binnen item rows verwijderd uit Accounting component
- ğŸ†• `InventoryCategory` import toegevoegd aan Accounting component

---

## Versie 5.7.0 ğŸ†• **VOORRAADBEHEER UITBREIDING: 3 SKU TYPES & CATEGORIEÃ‹N SYSTEEM**

**Nieuwe Features:**

**1. 3 SKU Types per Item**

- ğŸ†• **SKU Leverancier** - SKU zoals leverancier deze gebruikt (optioneel)
- ğŸ†• **Automatische SKU** - Automatisch gegenereerd (INV-0001, INV-0002, etc.)
  - Format: INV-XXXX (4-cijferig met leading zeros)
  - Automatisch gegenereerd bij nieuwe items
  - Kan handmatig worden aangepast bij bewerken
- ğŸ†• **Aangepaste SKU** - Vrij invulbare SKU voor eigen gebruik (optioneel)
- âœ… **Tabel uitgebreid** - 3 SKU kolommen naast elkaar in voorraadtabel
- âœ… **Primaire SKU** - Automatische SKU wordt getoond als primaire SKU in tabel
- âœ… **Legacy support** - Oude `sku` veld blijft werken voor backward compatibility

**2. Uitgebreide Zoeken/Filteren**

- ğŸ†• **Zoeken in alle velden** - Zoekbalk zoekt nu in:
  - Item naam
  - Alle 3 SKU types (leverancier, auto, aangepast)
  - Locatie
  - Eenheid
  - Leverancier naam
  - Categorie naam
  - Aankoopprijs en verkoopprijs (als getal)
  - POS alert notitie
- ğŸ†• **Verbeterde placeholder** - Duidelijke hint: "Zoek op naam, SKU, locatie, leverancier, categorie, prijs, etc..."
- âœ… **Real-time filtering** - Resultaten worden direct bijgewerkt tijdens typen

**3. CategorieÃ«n Systeem**

- ğŸ†• **InventoryCategory interface** - Nieuwe type voor categorieÃ«n met:
  - Naam (verplicht)
  - Beschrijving (optioneel)
  - Kleur (voor visuele weergave)
- ğŸ†• **CategorieÃ«n Tab** - Nieuwe tab "ğŸ·ï¸ CategorieÃ«n" in voorraadbeheer
- ğŸ†• **CategorieÃ«n beheer:**
  - Handmatig categorieÃ«n aanmaken met naam, beschrijving en kleur
  - CategorieÃ«n bewerken
  - CategorieÃ«n verwijderen (met waarschuwing als items gekoppeld zijn)
  - Tabel overzicht met aantal items per categorie
  - Kleur badges voor visuele herkenning
- ğŸ†• **Categorie dropdown** - Bij item toevoegen/bewerken:
  - Dropdown met alle bestaande categorieÃ«n
  - "Geen categorie" optie
  - "+ Nieuwe Categorie" knop
- ğŸ†• **Nieuwe categorie vanuit item formulier:**
  - Inline formulier voor nieuwe categorie
  - Kleur picker
  - Automatische selectie na aanmaken
  - Direct beschikbaar in dropdown
- ğŸ†• **Categorie weergave in tabel:**
  - Categorie kolom toegevoegd
  - Kleur badges met categorienaam
  - Visuele identificatie per item

**4. Zoekbare Categoriefilter Dropdown** ğŸ†•

- ğŸ†• **Dropdown filter** - Filter items op categorie met een handige dropdown
- ğŸ†• **Zoekbare dropdown** - Type in dropdown om snel categorieÃ«n te vinden:
  - Zoek op categorienaam
  - Zoek op beschrijving
  - Real-time filtering in dropdown
- ğŸ†• **Visuele feedback:**
  - Kleur badges per categorie in dropdown
  - Item count per categorie (bijv. "Metaal (5)")
  - Highlight van geselecteerde categorie
  - "Alle categorieÃ«n" optie voor reset
- ğŸ†• **Combinatie filtering** - Categoriefilter werkt samen met zoekbalk:
  - Filter eerst op categorie
  - Zoek daarna binnen gefilterde categorie
  - Beide filters werken naadloos samen
- ğŸ†• **"Wis filter" knop** - Verschijnt wanneer categorie is geselecteerd voor snel resetten
- ğŸ†• **Auto-focus** - Bij openen dropdown wordt direct in zoekveld getypt
- ğŸ†• **Overlay sluiten** - Klik buiten dropdown sluit automatisch
- âœ… **Responsive design** - Werkt perfect op mobile en desktop

**5. Dubbelklik om te Bewerken**

- ğŸ†• **Dubbelklik functionaliteit** - Dubbelklik op item rij om direct te bewerken
- ğŸ†• **Visuele feedback** - Cursor pointer op rijen (alleen voor admins)
- ğŸ†• **Tooltip hint** - "Dubbelklik om te bewerken" bij hover
- âœ… **Alleen voor admins** - Non-admin gebruikers kunnen niet dubbelklikken

**Technische Updates:**

- ğŸ†• `InventoryCategory` interface toegevoegd aan `types.ts`
- ğŸ†• `supplierSku`, `autoSku`, `customSku` velden toegevoegd aan `InventoryItem`
- ğŸ†• `categoryId` veld toegevoegd aan `InventoryItem`
- ğŸ†• `generateAutoSku()` functie voor automatische SKU generatie
- ğŸ†• `handleAddCategory()`, `handleEditCategory()`, `handleDeleteCategory()` functies
- ğŸ†• Uitgebreide `filteredInventory` useMemo met categorie filter + zoeken in alle velden
- ğŸ†• `filteredCategories` useMemo voor zoekbare dropdown
- ğŸ†• CategorieÃ«n state management en CRUD operaties
- ğŸ†• `categoryFilter`, `categorySearchTerm`, `showCategoryDropdown` state management
- ğŸ†• `onDoubleClick` handler toegevoegd aan tabel rijen

**Voordelen:**

- âœ… **Flexibele SKU tracking** - 3 verschillende SKU types voor verschillende use cases
- âœ… **Automatische nummering** - Geen handmatige SKU beheer nodig
- âœ… **Betere organisatie** - CategorieÃ«n maken voorraad overzichtelijker
- âœ… **Sneller zoeken** - Zoek in alle relevante velden tegelijk
- âœ… **Snel filteren** - Categoriefilter voor direct overzicht per categorie
- âœ… **Zoekbare dropdown** - Type om snel de juiste categorie te vinden
- âœ… **EfficiÃ«nter werken** - Dubbelklik voor snel bewerken
- âœ… **Visuele identificatie** - Kleur badges voor snelle categorie herkenning

---

## Versie 5.6.0 ğŸ†• **AUTOMATISCHE KLOON BIJ ACCEPTATIE & HERINNERINGSPLANNING + WERKORDER FILTERING**

**Nieuwe Features:**

**1. Automatische Kloon bij Offerte Acceptatie**

- ğŸ†• **Acceptatie modal met kloon optie** - Bij "Accepteren" verschijnt een modal met checkbox
- ğŸ†• **"Kloon voor volgende periode" checkbox** - Optioneel kloon van offerte voor volgende periode
- ğŸ†• **Automatische datum berekening** - Nieuwe offerte krijgt +30 dagen vanaf geldigheidsdatum
- ğŸ†• **Slimme notitie** - Geclonede offerte bevat notitie: "Gekloond van [ID] (geaccepteerd op [datum]) voor volgende periode"
- ğŸ†• **Status: Draft** - Geclonede offerte krijgt status "draft" (niet automatisch verzenden)
- ğŸ†• **Opt-in workflow** - Checkbox staat standaard uit, gebruiker kiest zelf
- âœ… **Voordelen:**
  - 80% tijdwinst voor terugkerende klanten
  - Geen handmatig "Kloon" zoeken
  - Voorkomt fouten in items/prijzen
  - EÃ©n klik = nieuwe offerte klaar

**2. Automatische Herinneringsplanning voor Facturen (Fase 1)**

- ğŸ†• **Automatische planning bij verzenden** - Wanneer factuur wordt verzonden, worden herinneringsdatums automatisch berekend:
  - Herinnering 1: +7 dagen na vervaldatum
  - Herinnering 2: +14 dagen na vervaldatum
- ğŸ†• **Visuele weergave in factuurdetails** - Herinneringsplanning zichtbaar in factuur card:
  - Datum per herinnering
  - Status (verzonden/niet verzonden)
  - "Herinnering nu sturen" knop
  - Template tekst: "Betreft factuur [nummer] â€“ vriendelijke herinnering"
- ğŸ†• **Handmatige trigger** - "Herinnering nu sturen" knop voor directe actie
- ğŸ†• **Status tracking** - Verzonden datum wordt opgeslagen
- ğŸ†• **History integratie** - Herinneringen worden toegevoegd aan factuur history
- âœ… **Voordelen:**
  - Geen openstaande posten meer door vergeten
  - Professionaliseert debiteurenbeheer
  - Werkt volledig automatisch
  - Visuele reminders voor administratie

**3. Factuur Validatie Fix**

- ğŸ†• **Directe status update** - Na validatie wordt factuur direct bijgewerkt naar "sent"
- ğŸ†• **Geen dubbele validatie** - Voorkomt dat validatie modal opnieuw wordt geopend
- ğŸ†• **Successmelding** - Duidelijke feedback na validatie en verzending
- ğŸ†• **Herinneringsplanning automatisch** - Wordt automatisch toegevoegd bij verzenden

**4. Betaalde Facturen Verbergen**

- ğŸ†• **Filter in Facturen-tab** - Betaalde facturen worden niet meer getoond in Facturen-tab
- ğŸ†• **Automatische verplaatsing** - Betaalde facturen zijn alleen zichtbaar in Boekhouding & Dossier
- ğŸ†• **Lege-staatmelding** - Duidelijke melding wanneer er geen openstaande facturen zijn
- ğŸ†• **Info banner in overview** - Bij klikken op "Betaald" statistiek wordt gebruiker geÃ¯nformeerd
- ğŸ†• **Overview modal filter** - "Totaal Gefactureerd" sluit betaalde facturen uit
- âœ… **Voordelen:**
  - Overzichtelijker Facturen-tab (alleen openstaande facturen)
  - Duidelijke scheiding tussen actief en archief
  - Betaalde facturen op Ã©Ã©n plek (Boekhouding & Dossier)

**5. Werkorder Filtering per Medewerker (Admin)**

- ğŸ†• **Intelligente medewerker filtering** - Bij "Alle medewerkers" view worden medewerkers zonder werkorders in de gefilterde status automatisch verborgen
- ğŸ†• **Status-gebaseerde filtering** - Filter op "To Do", "In Wacht", "Bezig" of "Afgerond" toont alleen medewerkers met werkorders in die status
- ğŸ†• **Geen filter = alle medewerkers** - Zonder actief filter worden alle medewerkers getoond (ook die zonder werkorders)
- ğŸ†• **Automatische filtering** - Werkt automatisch in de gegroepeerde weergave per medewerker
- âœ… **Voordelen:**
  - Overzichtelijker werkboard bij filtering
  - Sneller vinden van relevante medewerkers
  - Geen lege secties meer bij status filtering
  - Betere focus op actieve werkorders

**Technische Updates:**

- ğŸ†• `reminders` interface toegevoegd aan `Invoice` type
- ğŸ†• `handleAcceptQuote()` functie voor acceptatie met kloon optie
- ğŸ†• `handleSendReminder()` functie voor handmatige herinnering
- ğŸ†• Automatische herinneringsplanning in `updateInvoiceStatus()`
- ğŸ†• `confirmInvoiceValidation()` directe status update (geen dubbele check)
- ğŸ†• Filter logica voor betaalde facturen in Facturen-tab en overview modal
- ğŸ†• Medewerker filtering logica in `WorkOrders.tsx` - verberg medewerkers zonder werkorders in gefilterde status

**Voordelen:**

- âœ… **Workflow optimalisatie** - Minder handmatige stappen voor terugkerende klanten
- âœ… **Debiteurenbeheer** - Automatische herinneringsplanning voorkomt vergeten
- âœ… **Overzichtelijkheid** - Betaalde facturen op juiste plek (archief)
- âœ… **Professionaliteit** - Waterdichte workflow van offerte tot betaling

---

## Versie 5.5.0 ğŸ†• **FINANCIEEL OVERZICHT VOOR FACTUUR ARCHIEF + KASSA VERKOPEN**

**Nieuwe Features:**

**1. Financieel Overzicht voor Factuur Archief**

- ğŸ†• **Twee weergaven toggle** - Schakel tussen "Facturen Lijst" en "Financieel Overzicht"
- ğŸ†• **Periode filter** - Filter op: Vandaag, Deze Week, Dit Kwartaal, Dit Jaar, Alle Facturen, Aangepaste Periode
- ğŸ†• **Klantnaam filter** - Zoek op (deel van) klantnaam voor gerichte filtering
- ğŸ†• **Summary cards (2 rijen):**
  - **Eerste rij:** Totaal Items, Totaal Aantal, Omzet (incl. BTW), BTW Totaal
  - **Tweede rij:** Betaald Omzet, Openstaand Omzet, Vervallen Omzet, Draft Omzet
- ğŸ†• **Excel-achtige tabel** met gedetailleerde item breakdown:
  - Kolommen: Datum, Factuur, Klant, Status, Product, Aantal, Prijs per stuk, BTW %, BTW bedrag, Totaal (incl. BTW)
  - Elke factuurregel wordt uitgebreid naar individuele items
  - Totaalrij onderaan met samenvatting
  - Automatisch gesorteerd op datum (nieuwste eerst)
- ğŸ†• **CSV export** - Exporteer gefilterde data inclusief totalen naar CSV
- ğŸ†• **Extra statistieken** - Unieke Facturen, Unieke Producten, Unieke Klanten
- ğŸ†• **Automatische filtering** - Exclusief POS facturen (die staan in Kassa Verkopen tab)

**2. Financieel Overzicht voor Kassa Verkopen**

- ğŸ†• **Twee weergaven toggle** - Schakel tussen "Facturen Lijst" en "Financieel Overzicht"
- ğŸ†• **Periode filter** - Zelfde filters als Factuur Archief
- ğŸ†• **Summary cards (2 rijen):**
  - **Eerste rij:** Totaal Items, Totaal Aantal, Omzet (incl. BTW), BTW Totaal
  - **Tweede rij:** PIN Omzet, Contant Omzet, iDEAL Omzet, Creditcard Omzet
- ğŸ†• **Excel-achtige tabel** met alle kassa transactie items:
  - Kolommen: Datum, Factuur, Klant, Betaalmethode, Product, Aantal, Prijs per stuk, BTW %, BTW bedrag, Totaal (incl. BTW)
  - Betaalmethode weergave met iconen (ğŸ’µ Contant, ğŸ’³ PIN, ğŸ¦ iDEAL, ğŸ’³ Creditcard)
  - Totaalrij onderaan
- ğŸ†• **CSV export** - Exporteer gefilterde kassa data naar CSV
- ğŸ†• **Extra statistieken** - Unieke Facturen, Unieke Producten, Omzet (excl. BTW)

**3. Verbeteringen & Fixes**

- ğŸ†• **Datum correctie** - Periode filter gebruikt nu lokale tijdzone (geen UTC conversie)
- ğŸ†• **"Alle Facturen" optie** - Standaard filter toont nu alle facturen (niet alleen vandaag)
- ğŸ†• **Lege facturen overslaan** - Facturen zonder items worden automatisch overgeslagen
- ğŸ†• **POS filtering** - Kassa verkopen worden correct gescheiden van reguliere facturen

**Voordelen:**

- âœ… **Gedetailleerd inzicht** - Zie elk individueel item per factuur in Ã©Ã©n overzicht
- âœ… **Flexibele filtering** - Filter op periode en klantnaam voor gerichte analyses
- âœ… **Betaalmethode tracking** - Zie direct hoeveel omzet per betaalmethode (kassa)
- âœ… **Status breakdown** - Zie omzet per factuurstatus (betaald/openstaand/verlopen)
- âœ… **Export ready** - CSV export voor verdere analyse in Excel
- âœ… **Overzichtelijk** - Twee weergaven voor verschillende use cases

**Technische Updates:**

- ğŸ†• `FactuurItemRow` interface voor factuur item data structuur
- ğŸ†• `facturenItemRows` useMemo voor filtering en item extractie
- ğŸ†• `facturenOverviewTotals` useMemo voor berekening van totalen per status
- ğŸ†• `facturenView`, `facturenPeriodFilter`, `facturenCustomerFilter` state management
- ğŸ†• `getDateRange` functie uitgebreid met "all" optie
- ğŸ†• CSV export functionaliteit voor beide overzichten
- ğŸ†• Automatische BTW berekening per item (proportioneel)

---

## Versie 5.4.0 ğŸ†• **KASSA VERKOPEN TAB & KLIKBARE FACTUREN MET CLONE**

**Nieuwe Features:**

**1. Kassa Verkopen Tab**

- ğŸ†• **Nieuwe tab** - "ğŸ›’ Kassa Verkopen" in Boekhouding & Dossier module
- ğŸ†• **Automatische filtering** - Toont alle facturen aangemaakt via kassasysteem
- ğŸ†• **Direct betaalde facturen** - Alle kassa verkopen hebben status 'paid'
- ğŸ†• **Betaalmethode weergave** - Toont betaalmethode (ğŸ’µ Contant, ğŸ’³ PIN, ğŸ¦ iDEAL, ğŸ’³ Creditcard)
- ğŸ†• **Groene styling** - Visuele indicatie voor direct betaalde transacties
- ğŸ†• **Klikbaar** - Elke kassa verkoop is klikbaar voor details

**2. Klikbare Facturen (Factuur Archief & Kassa Verkopen)**

- ğŸ†• **Klikbare items** - Alle facturen in Factuur Archief zijn nu klikbaar
- ğŸ†• **Detail modal** - Volledige factuurdetails in read-only modal:
  - Header info (factuurnummer, status, klant, datums)
  - Items tabel (omschrijving, aantal, prijs per eenheid, totaal)
  - Werkuren tabel (indien aanwezig)
  - Totaaloverzicht (subtotaal excl. BTW, BTW bedrag, totaal incl. BTW)
  - Notities (indien aanwezig)
- ğŸ†• **Read-only** - Alle velden zijn alleen-lezen (niet aanpasbaar)
- ğŸ†• **Visuele feedback** - Cursor pointer en hover-effecten

**3. Clone Functionaliteit**

- ğŸ†• **Klonen naar Factuur** - Maak nieuwe factuur met status 'draft':
  - Automatisch nieuw factuurnummer
  - Factuurdatum = vandaag
  - Vervaldatum = +14 dagen
  - Notitie: "Gekloond van factuur XXX"
  - Status: Draft (klaar om te bewerken)
- ğŸ†• **Klonen naar Offerte** - Maak nieuwe offerte met status 'draft':
  - Automatisch nieuw offertenummer
  - Aanmaakdatum = vandaag
  - Geldigheidsdatum = +30 dagen
  - Notitie: "Gekloond van factuur XXX"
  - Status: Draft
- ğŸ†• **Bevestigingsmodal** - Vraagt bevestiging voordat gekloond wordt
- ğŸ†• **Succesmelding** - Duidelijke feedback na clonen

**4. Extra Functionaliteit**

- ğŸ†• **Betaal-knop in archief** - Openstaande facturen kunnen direct als betaald worden gemarkeerd
- ğŸ†• **Props toegevoegd** - `setInvoices` en `setQuotes` aan Bookkeeping component
- ğŸ†• **App.tsx bijgewerkt** - Nieuwe props doorgegeven aan Bookkeeping

**Voordelen:**

- âœ… **Overzichtelijk** - Kassa verkopen apart van andere facturen
- âœ… **Volledige details** - Zie alle factuurinformatie zonder te bewerken
- âœ… **Clone workflow** - Eenvoudig facturen/offertes dupliceren
- âœ… **Terugkerende klanten** - Clone vorige facturen voor nieuwe opdrachten
- âœ… **Snelle acties** - Direct betaal markeren vanuit archief

**Technische Updates:**

- ğŸ†• `posInvoices` useMemo voor filtering kassa verkopen
- ğŸ†• `openInvoiceDetail` functie voor modal openen
- ğŸ†• `handleCloneToInvoice` en `handleCloneToQuote` functies
- ğŸ†• Detail modal component met read-only weergave
- ğŸ†• Clone confirmation modal
- ğŸ†• Props uitgebreid in Bookkeeping component

---

## Versie 5.3.0 ğŸ†• **COMPACTE WERKORDER WEERGAVE**

**Nieuwe Features:**

**1. Compacte/Uitgebreide Weergave Toggle**

- ğŸ†• **Toggle switch** boven werkorders - Schakel tussen compacte en uitgebreide weergave
- ğŸ†• **Compacte weergave:**
  - Alleen indexnummer (#) en omschrijving
  - Kleinere cards met minimale padding
  - Beperkte hoogte (max 2 regels tekst)
  - Visuele hint (ğŸ‘†) dat klikbaar is
  - Perfect voor snel overzicht van veel werkorders
- ğŸ†• **Uitgebreide weergave:**
  - Volledige card met alle details (zoals nu)
  - Titel, beschrijving, materialen, uren, status, etc.
  - Alle functionaliteit behouden
- ğŸ†• **Beide versies interactief:**
  - Klikbaar en dubbelklikbaar voor detail modal
  - Details altijd toegankelijk
  - Smooth transition tussen views

**Voordelen:**

- âœ… **Meer werkorders in Ã©Ã©n overzicht** - Zie meer taken tegelijk
- âœ… **Sneller scannen** - Compacte view voor snel overzicht
- âœ… **Flexibel gebruik** - Schakel tussen views wanneer nodig
- âœ… **Details altijd beschikbaar** - Dubbelklik voor volledige informatie

**Technische Updates:**

- ğŸ†• `compactView` state toegevoegd aan WorkOrders component
- ğŸ†• `compactView` prop toegevoegd aan WorkOrderCard component
- ğŸ†• Conditionele rendering voor compacte vs uitgebreide weergave
- ğŸ†• Toggle UI met visuele feedback

---

## Versie 5.2.0 ğŸ†• **BOEKHOUDING & DOSSIER MODULE - MKB-READY, NL-COMPLIANT**

**Nieuwe Module:**

**1. Boekhouding & Dossier (Volledig GeÃ¯mplementeerd)**

- ğŸ†• **Nieuwe module toegevoegd** - Volledig digitaal boekhouddossier systeem
- ğŸ†• **5 Kernfuncties:**
  1. Grootboekrekeningen (Standaard MKB-Set)
  2. Factuur & Pakbon Archief (Digitaal Dossier)
  3. BTW-Overzicht (Aangifte-Ready)
  4. Klant- & Leveranciersdossiers
  5. Transactieregistratie (Journaal)

**2. Grootboekrekeningen**

- ğŸ†• **10 Standaard MKB-rekeningen** ingesteld (1300, 1400, 4000, 4400, 8000, 8010, 8020, 1600, 2200, 2210)
- ğŸ†• **CSV export** - Exporteer grootboek naar CSV voor Exact, Twinfield, etc.
- ğŸ†• **Tabel overzicht** - Alle rekeningen met type, categorie en omschrijving

**3. Factuur & Pakbon Archief**

- ğŸ†• **Automatisch archief** - Elke factuur wordt automatisch toegevoegd
- ğŸ†• **Zoeken & filteren** - Op nummer, klant, datum, status
- ğŸ†• **Acties per factuur** - PDF download, herinnering sturen, markeer als betaald
- ğŸ†• **Visuele status indicatoren** - Rode/groene/gele badges

**4. BTW-Overzicht**

- ğŸ†• **Automatische berekening** per maand/kwartaal
- ğŸ†• **Periode rapport** - Omzet per BTW-tarief (21%, 9%, 0%)
- ğŸ†• **Te betalen berekening** - Totaal af te dragen minus voorbelasting
- ğŸ†• **Export knoppen** - XML export (placeholder) en Print PDF
- ğŸ†• **Dynamische data** - Automatisch berekend uit facturen

**5. Klant- & Leveranciersdossiers**

- ğŸ†• **Alles op Ã©Ã©n plek** - Volledig dossier per klant/leverancier
- ğŸ†• **FinanciÃ«le informatie** - Openstaand saldo, credit-limiet
- ğŸ†• **Documenten koppeling** - Facturen, pakbonnen, offertes, werkorders
- ğŸ†• **Notities systeem** - Voeg notities toe per relatie
- ğŸ†• **Tabbladen structuur** - Facturen, Pakbonnen, Offertes, Notities

**6. Transactieregistratie (Journaal)**

- ğŸ†• **Volledig automatisch** - Elke factuur genereert journaalpost
- ğŸ†• **Journaalregels** - Debet/Credit met correcte grootboek toewijzing
- ğŸ†• **Automatische BTW splitsing** - BTW 21% â†’ 2200, BTW 9% â†’ 2210
- ğŸ†• **Automatische omzet toewijzing** - Goederen â†’ 8000, Diensten â†’ 8010, Vrijgesteld â†’ 8020
- ğŸ†• **Zoeken & filteren** - Op omschrijving, referentie, datum
- ğŸ†• **Handmatig toevoegen** - Knop voor handmatige journaalposten (placeholder)

**7. Permissions Systeem**

- ğŸ†• **Admin/Boekhouder** - Volledige toegang (grootboek, facturen, BTW, journaal, dossiers)
- ğŸ†• **Verkoper/Inkoop** - Alleen dossiers tab
- ğŸ†• **Monteur** - Geen toegang

**8. Integratie met Bestaande Modules**

- ğŸ†• **POS/Kassa** â†’ Automatische factuur + journaalpost
- ğŸ†• **Pakbon (B2B)** â†’ Wordt factuur bij "Markeer als gefactureerd"
- ğŸ†• **Voorraad** â†’ Inkoopfactuur â†’ voorraad + crediteuren
- ğŸ†• **CRM** â†’ Klantgegevens automatisch in dossier
- ğŸ†• **Accounting Module** â†’ Facturen automatisch in archief

**Technische Updates:**

- ğŸ†• `ModuleKey.BOOKKEEPING` toegevoegd
- ğŸ†• `LedgerAccount`, `JournalEntry`, `JournalEntryLine`, `VATReport` types
- ğŸ†• `CustomerDossier`, `SupplierDossier`, `InvoiceArchiveItem`, `DossierNote` types
- ğŸ†• `BookkeepingIcon` component
- ğŸ†• Volledige `Bookkeeping.tsx` pagina component (600+ regels)
- ğŸ†• Automatische journaalpost generatie vanuit facturen
- ğŸ†• Automatische BTW berekening per periode
- ğŸ†• Automatisch factuurarchief vanuit Accounting module
- ğŸ†• Routing geconfigureerd in App.tsx

**Voordelen:**

- âœ… **MKB-Ready** - Standaard MKB grootboekset ingebouwd
- âœ… **NL-Compliant** - BTW per tarief (21%, 9%, 0%) gesplitst
- âœ… **Aangifte-Ready** - BTW-rapport klaar voor accountant/belastingdienst
- âœ… **Geen handmatig werk** - Automatisch journaal en BTW-berekening
- âœ… **Volledig digitaal** - Alle facturen en dossiers op Ã©Ã©n plek
- âœ… **Traceerbaar** - Elke transactie gekoppeld aan bron
- âœ… **Controle-ready** - Direct klaar voor Belastingdienst controle

---

## Versie 5.1.0 ğŸ†• **BATCH OPERATIONS & UX VERBETERINGEN**

**Nieuwe Features:**

- âœ… **Batch Operations voor Offertes** - Selecteer meerdere offertes en voer bulk acties uit:
  - Meerdere offertes omzetten naar werkorders
  - Meerdere concept offertes verzenden
  - Visuele selectie met checkboxes
  - Teller met aantal geselecteerde items
- âœ… **Batch Operations voor Facturen** - Selecteer meerdere facturen en voer bulk acties uit:
  - Meerdere facturen als betaald markeren
  - Meerdere concept facturen verzenden
  - Visuele selectie met checkboxes
  - Teller met aantal geselecteerde items
- âœ… **Verbeterde Werkorder Detail Modal** - Volledig herontworpen met:
  - Visuele blokken/cards voor duidelijke structuur
  - Contextuele iconen voor snelle herkenning
  - Betere typografie en kleuren hiÃ«rarchie
  - Fade-in en slide-in animaties
  - Click-outside-to-close functionaliteit
  - Verbeterde button styling met iconen
- âœ… **Fix voor Werkorder Klik Functionaliteit** - Alle statussen (To Do, In Wacht, In Uitvoering, Afgerond) kunnen nu worden geklikt om details te zien
- âœ… **POS Verbetering** - Handmatig item prijsveld gebruikt nu placeholder in plaats van vaste "0" waarde
- âœ… **Header Fix** - JSX structuur gecorrigeerd voor betere compatibiliteit

**UX Verbeteringen:**

- âœ… Visuele hiÃ«rarchie met cards en subtiele schaduwen
- âœ… Contextuele iconen (ğŸ“‹, ğŸ‘¤, ğŸ¢, ğŸ—“ï¸, ğŸ“, â±ï¸, ğŸ’°, ğŸ“, âš ï¸, ğŸ§±, ğŸ•’, ğŸ“„, ğŸ“)
- âœ… Emotionele beleving met zachte achtergrondtinten en afgeronde hoeken
- âœ… Interactie & focus met animaties en betere knoppen
- âœ… Batch selectie modus met duidelijke visuele feedback

**Technische Updates:**

- âœ… Nieuwe `ContextualRelatedItems` component voor gerelateerde items
- âœ… Nieuwe `UnifiedSearch` component voor globale zoekfunctionaliteit
- âœ… Nieuwe `smartNotifications` utility voor contextuele notificaties
- âœ… Nieuwe `workflowValidation` utility voor workflow guardrails
- âœ… CSS animaties voor modal fade-in en slide-in effecten
- âœ… Verbeterde event handling met stopPropagation voor betere UX

---

## Versie 5.0.0 ğŸ†• **WEBSHOP MODULE - VOLLEDIG GEÃMPLEMENTEERD**

**Nieuwe Module:**

**1. Webshop Beheer Systeem**

- ğŸ†• **Nieuwe module toegevoegd** - Volledig e-commerce beheer systeem
- ğŸ†• **3 Main Tabs:**
  - ğŸ“¦ Producten - Volledig product beheer
  - ğŸ·ï¸ CategorieÃ«n - HiÃ«rarchisch categorie systeem
  - ğŸ“‹ Bestellingen - Order beheer en tracking

**2. Product Beheer (Volledig CRUD)**

- ğŸ†• **Uitgebreid Product Formulier** met georganiseerde secties:
  - Basis informatie (naam, slug, SKU, beschrijvingen)
  - Prijs & voorraad (verkoop/was/inkoopprijs, voorraad tracking)
  - CategorieÃ«n (multi-select met primaire categorie)
  - Status & zichtbaarheid (draft/active/archived, public/private/hidden)
  - Verzending (gewicht, afmetingen, verzendcategorie, digitaal product)
  - SEO & marketing (meta title/description, tags)
  - Extra opties (BTW tarief, reviews, admin notities)
- ğŸ†• **Automatische Generatie:**
  - URL slug uit productnaam (SEO-vriendelijk)
  - SKU nummering (PRD-0001, PRD-0002, etc.)
- ğŸ†• **Inventory Koppeling** - Koppel producten aan voorraad items
- ğŸ†• **Image Upload Voorbereiding** - Structuur klaar voor frontend
- ğŸ†• **Product Varianten Structuur** - Voorbereid voor kleuren, maten, etc.
- ğŸ†• **Zoeken & Filteren:**
  - Zoek op naam, SKU, beschrijving, tags
  - Filter op status en categorie
  - Grid/List view toggle
- ğŸ†• **Status Management:**
  - Draft, Active, Archived statussen
  - Quick toggle knoppen
  - Visibility settings (public, private, hidden)

**3. CategorieÃ«n Beheer**

- ğŸ†• **Volledig Categorie CRUD**
- ğŸ†• **HiÃ«rarchische Structuur** - Parent/child categorieÃ«n met visuele indicatie
- ğŸ†• **Multi-categorie Support** - Producten in meerdere categorieÃ«n
- ğŸ†• **Primaire Categorie** - Hoofd categorie selectie
- ğŸ†• **Sorteerbare Volgorde** - Bepaal weergave volgorde
- ğŸ†• **SEO Velden** - Meta title en description per categorie
- ğŸ†• **Product Count** - Zie hoeveel producten per categorie
- ğŸ†• **Actief/Inactief Toggle**

**4. Bestellingen Beheer**

- ğŸ†• **Order Overzicht** - Volledige lijst met filters
- ğŸ†• **Zoeken & Filteren** - Ordernummer, klantnaam, email, status
- ğŸ†• **Order Detail Modal:**
  - Klant informatie
  - Bestelde items tabel
  - Verzend- en factuuradres
  - Tracking informatie
  - Klant en admin notities
  - Order totalen breakdown
- ğŸ†• **Status Tracking:**
  - Order status (pending â†’ processing â†’ shipped â†’ delivered)
  - Payment status (pending â†’ paid)
  - Quick action buttons
- ğŸ†• **Status Updates:**
  - Markeer als "In Behandeling"
  - Markeer als "Verzonden"
  - Markeer als "Betaald"
  - Annuleer bestelling

**5. UX/UI Design Principes**

- ğŸ†• **Progressive Disclosure** - Georganiseerde secties met headers
- ğŸ†• **Color Coding** - Verschillende kleuren per functie
- ğŸ†• **Error Prevention** - Automatische generatie, validatie
- ğŸ†• **Feedback Loops** - Directe visuele feedback
- ğŸ†• **Responsive Design** - Mobile-first approach
- ğŸ†• **IntuÃ¯tieve Navigatie** - Duidelijke tabs en buttons

**6. Frontend Voorbereiding**

- ğŸ†• **SEO-Ready Structure** - Slugs, meta titles, descriptions
- ğŸ†• **Image Arrays** - Voorbereid voor product galleries
- ğŸ†• **Variant System** - Structuur voor kleuren, maten
- ğŸ†• **Shopping Cart Types** - WebshopCartItem, ShoppingCart
- ğŸ†• **Coupon System Types** - Percentage en fixed amount kortingen
- ğŸ†• **Address Structure** - Volledige adres structuur
- ğŸ†• **Review System** - Allow reviews flag en ratings
- ğŸ†• **Statistics Ready** - View count, purchase count, wishlist count

**Technische Updates:**

- ğŸ†• `WebshopProduct`, `ProductCategory`, `ProductVariant`, `ProductImage` types
- ğŸ†• `Order`, `OrderItem`, `Address` types
- ğŸ†• `ShoppingCart`, `WebshopCartItem`, `Coupon` types
- ğŸ†• `ModuleKey.WEBSHOP` toegevoegd
- ğŸ†• WebshopIcon component
- ğŸ†• Volledige Webshop pagina component (2000+ regels)
- ğŸ†• Routing geconfigureerd in App.tsx

**Voordelen:**

- âœ… **Gebruiksvriendelijk Admin Interface** - Makkelijk producten beheren
- âœ… **Voorbereid voor Frontend** - Alle data structuren aanwezig
- âœ… **SEO Optimalisatie** - Slugs, meta tags, descriptions
- âœ… **Schaalbaar Design** - Klaar voor groei
- âœ… **Inventory Integratie** - Koppeling met bestaand voorraad systeem
- âœ… **Professional Workflow** - Van product tot bestelling volledig afgehandeld

---

[â† Terug naar Changelog Overzicht](./README.md)
